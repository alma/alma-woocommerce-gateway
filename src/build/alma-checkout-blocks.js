(()=>{"use strict";const e=window.React,a=window.wp.element;!function(n){const t=["alma_in_page_pay_now","alma","alma_pay_later","alma_pay_now","alma_pnx_plus_4","alma_pa"];var o=void 0,_=!1,i={},l={};for(const n in t){const o=window.wc.wcSettings.getSetting(`${t[n]}_data`,null);if(!o)continue;const c=window.wp.htmlEntities.decodeEntities(o.title),s=n=>{const{eventRegistration:t,emitResponse:_}=n;if(!o.is_in_page){const{onPaymentProcessing:e}=t;return(0,a.useEffect)((()=>{const a=e((async()=>{const e={[`alma_checkout_nonce${o.gateway_name}`]:`${o.nonce_value}`,alma_fee_plan:"general_10_0_0",payment_method:o.gateway_name};return{type:_.responseTypes.SUCCESS,meta:{paymentMethodData:e}}}));return()=>{a()}}),[_.responseTypes.ERROR,_.responseTypes.SUCCESS,e]),o.description}return console.log(n),i=n.billing.billingAddress,n.shippingData.shippingAddress&&(l=n.shippingData.shippingAddress),(0,e.createElement)("div",{id:"alma-inpage-alma_in_page_pay_now"})},r={name:o.gateway_name,label:c,content:(0,e.createElement)(s,null),edit:(0,e.createElement)(s,null),placeOrderButtonLabel:o.label_button,canMakePayment:()=>!0,ariaLabel:c};window.wc.wcBlocksRegistry.registerPaymentMethod(r),o.is_in_page&&(_=!0)}window.addEventListener("load",(e=>{if(_){var a=window.wc.wcSettings.getSetting("alma_in_page_pay_now_data",null);!function(e){void 0!==o&&null!==document.getElementById("alma-embedded-iframe")&&o.unmount(),o=Alma.InPage.initialize({merchantId:e.merchant_id,amountInCents:e.amount_in_cents,installmentsCount:"1",selector:"#alma-inpage-alma_in_page_pay_now",environment:e.environment,locale:e.locale})}(a)}document.getElementsByClassName("wc-block-components-checkout-place-order-button")[0].addEventListener("click",(e=>{e.stopPropagation();var t={action:"alma_do_checkout_in_page",fields:{billing:i,shipping:l,customer_note:"",alma_fee_plan:"general_1_0_0",alma_checkout_noncealma_in_page_pay_now:a.nonce_value,payment_method:"alma_in_page_pay_now"},"woocommerce-process-checkout-nonce":a.woocommerce_process_checkout_nonce,payment_method:"alma_in_page_pay_now",alma_fee_plan:"general_1_0_0",alma_fee_plan_in_page:"general_1_0_0",is_woo_block:!0};jQuery.post(ajax_object.ajax_url,t).done((function(e){var a=e.data.payment_id,t=e.data.order_id;o.startPayment({paymentId:a,onUserCloseModal:()=>{!function(e){var a={action:"alma_cancel_order_in_page",order_id:e};jQuery.post(ajax_object.ajax_url,a)}(t),n(".alma-loader-wrapper").remove()}})})).fail((function(e){location.reload()}))}))}))}(jQuery)})();