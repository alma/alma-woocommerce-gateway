(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.data,a=()=>{if(!window.wc.wcSettings.getSetting("alma-widget-block_data",null).can_be_displayed)return null;const{CART_STORE_KEY:a}=window.wc.wcBlocksData,i=(0,n.useSelect)((e=>{const t=e(a);return t&&t.getCartTotals()?.total_price||0}),[]);return(0,t.useEffect)((()=>{i&&window.Alma&&window.wc&&function(){const e=window.wc.wcSettings.getSetting("alma-widget-block_data",null);e&&Alma.Widgets.initialize(e.merchant_id,Alma.ApiMode[e.environment]).add(Alma.Widgets.PaymentPlans,{container:"#alma-widget",purchaseAmount:i,locale:e.locale,hideIfNotEligible:!1,plans:e.plans.map((e=>({installmentsCount:e.installments_count,minAmount:e.min_amount,maxAmount:e.max_amount,deferredDays:e.deferred_days,deferredMonths:e.deferred_months})))})}()}),[i]),(0,e.createElement)("div",{id:"alma-widget"})};!function(n){const i="alma-widget-container";var o;(o="#"+i,new Promise((e=>{const t=new MutationObserver((()=>{n(o).length>0&&(e(n(o)),t.disconnect())}));t.observe(document.body,{childList:!0,subtree:!0})}))).then((()=>{const n=document.getElementById(i);n&&(0,t.render)((0,e.createElement)(a,null),n)}))}(jQuery)})();